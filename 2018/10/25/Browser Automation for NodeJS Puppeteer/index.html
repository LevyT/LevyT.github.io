<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="Tomer Levy"><link rel="icon" href="/tomer.jpeg"><title>Information Security &amp; DevOps</title><meta name="description" content="Information Security &amp; Devops Blog"><link rel="alternate" type="application/rss+xml" title="Information Security &amp; DevOps" href="/atom.xml"><div id="link" rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"></div><div id="link" rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"></div><link rel="stylesheet" href="images/font-awesome.min.css"><link rel="stylesheet" href="images/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/highlight.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Information Security &amp; DevOps</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/archives">Archive</a></li><li><a href="/about/">About</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/tomer.jpeg" class="avatar-img"></a></div></div></div></nav><header class="header-section"><div class="intro-header no-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1>Browser Automation for NodeJS Puppeteer</h1><p class="post-meta">Posted on Oct 25 2018 · <a href="/tags/Browser-Automation/" class="tag post-meta">Browser Automation</a> · <a href="/tags/NodeJS/" class="tag post-meta">NodeJS</a></p></div></div></div></div></div></header><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role="main" class="blog-post"><p><strong><em>Puppeteer is a Node library which provides a high-level API to control Chrome or Chromium over the DevTools Protocol. Puppeteer runs headless by default unlike Selenium that we covered in the last post, but it can be configured to run full (non-headless) Chrome or Chromium.</em></strong></p>
<p>We’ll start by installing this module using NPM</p>
<p><code>npm install puppeteer</code></p>
<p>Which will automaticly install all of it’s dependencies and chromium engine</p>
<p>We will run this following example with <code>node example.js</code></p>
<iframe src="https://carbon.now.sh/embed/?bg=rgba(255%2C255%2C255%2C1)&t=dracula&wt=none&l=javascript&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=true&pv=48px&ph=32px&ln=false&fm=Hack&fs=13px&lh=133%25&si=false&code=const%2520puppeteer%2520%253D%2520require('puppeteer')%253B%250A%250A(async%2520()%2520%253D%253E%2520%257B%250A%2520%2520const%2520browser%2520%253D%2520await%2520puppeteer.launch()%253B%250A%2520%2520const%2520page%2520%253D%2520await%2520browser.newPage()%253B%250A%2520%2520await%2520page.goto('https%253A%252F%252Flevyt.github.io'%252C%2520%257BwaitUntil%253A%2520'networkidle2'%257D)%253B%250A%2520%2520await%2520page.pdf(%257Bpath%253A%2520'mypage.pdf'%252C%2520format%253A%2520'A4'%257D)%253B%250A%250A%2520%2520await%2520browser.close()%253B%250A%257D)()%253B&es=2x&wm=false&ts=false" style="transform:scale(0.7); width:1024px; height:473px; border:0; overflow:hidden;" sandbox="allow-scripts allow-same-origin"><br></iframe>


<p>And it will save the listed page as pdf at the listed path</p>
<p><img src="/images/puppeterpdf.png" alt=""></p>
<p>With the following code we can run about any javascript from the browser as if we would do it from the devtools by automation</p>
<iframe src="https://carbon.now.sh/embed/?bg=rgba(255%2C255%2C255%2C1)&t=dracula&wt=none&l=auto&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=true&pv=48px&ph=32px&ln=false&fm=Hack&fs=13px&lh=133%25&si=false&code=const%2520puppeteer%2520%253D%2520require('puppeteer')%253B%250A%250A(async%2520()%2520%253D%253E%2520%257B%250A%2520%2520const%2520browser%2520%253D%2520await%2520puppeteer.launch()%253B%250A%2520%2520const%2520page%2520%253D%2520await%2520browser.newPage()%253B%250A%2520%2520await%2520page.goto('https%253A%252F%252Flevyt.github.io'%252C%2520%257BwaitUntil%253A%2520'networkidle2'%257D)%253B%250A%2520%2520function%2520functionToInject%2520()%257B%250A%2520%2520%2520%2520%252F%252F%2520return%2520window.location.href%253B%2520%252F%252F%2520This%2520will%2520print%2520browser%2520url%250A%2520%2520%2520%2520return%2520document.cookie%2520%252F%252F%2520This%2520will%2520print%2520session%2520cookie%250A%2520%2520%257D%250A%2520%2520%250A%2520%2520var%2520data%2520%253D%2520await%2520page.evaluate(functionToInject)%250A%2520%2520console.log(data)%253B%250A%2520%2520await%2520browser.close()%253B%250A%257D)()%253B&es=2x&wm=false&ts=false" style="transform:scale(0.7); width:1024px; height:473px; border:0; overflow:hidden;" sandbox="allow-scripts allow-same-origin"><br></iframe>



<p>Proof of concept:</p>
<p><img src="/images/functionspup.png" alt=""></p>
<p>To summraize this, <strong>puppeteer is a very good library for browser automation and helpful for testing.</strong></p>
</article><ul class="pager blog-pager"><li class="previous"><a href="/2018/11/07/My way for file serving/" data-toggle="tooltip" data-placement="top" title="My way for file serving">← Previous Post</a></li><li class="next"><a href="/2018/10/19/Setting up Selenium for Python/" data-toggle="tooltip" data-placement="top" title="Browser Automation Selenium for Python">Next Post →</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="/atom.xml" title="RSS"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-rss"></i></span></a></li><li><a href="mailto:tl1996@gmail.com" title="Email me"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-envelope"></i></span></a></li><li><a href="https://www.linkedin.com/in/tomer-levy/" title="LinkedIn"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-linkedin"></i></span></a></li></ul><p class="copyright text-muted">© Tomer Levy • 2019 • <a href="mailto:undefined"></a>
</p><p class="theme-by text-muted">Theme by
<a href="https://github.com/twoyao/beautiful-hexo">beautiful-hexo</a></p></div></div></div></footer><div id="script" src="//cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></div><div id="script" src="//cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></div><script src="images/jquery.min.js"></script><script src="images/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
    a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-124261609-1', 'auto');
ga('send', 'pageview');</script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false}});</script></body></html>